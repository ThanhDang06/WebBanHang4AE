@model IEnumerable<WBH.Models.Order>

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/WBH.cshtml";
}
<style>
    table.table-hover tbody tr:hover {
        background-color: rgba(0, 123, 255, 0.05);
    }

    .badge {
        font-size: 0.9rem;
        padding: 0.4em 0.6em;
    }
</style>

<div class="container mt-5">
    <h2 class="mb-4">Lịch sử đơn hàng</h2>

    @if (Model != null && Model.Any())
    {
        <div class="table-responsive">
            <table class="table table-hover align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Mã đơn</th>
                        <th>Ngày đặt</th>
                        <th>Địa chỉ</th>
                        <th>Điện thoại</th>
                        <th>Phương thức</th>
                        <th>Trạng thái</th>
                        <th>Tổng tiền</th>
                        <th>Chi tiết</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var order in Model)
                    {
                        <tr>
                            <td>@order.IDOrder</td>
                            <td>@(order.DateOrder?.ToString("dd/MM/yyyy") ?? "-")</td>
                            <td>@order.AddressDelivery</td>
                            <td>@order.Phone</td>
                            <td>@order.PaymentMethod</td>
                            <td>
                                <span class="badge order-status-badge bg-@(order.Status == "Hoàn thành" ? "success" : order.Status == "Đang xử lý" ? "warning" : "secondary")"
                                      data-order-id="@order.IDOrder"
                                      data-url="@Url.Action("GetOrderStatus", "Customers")">
                                    @order.Status
                                </span>
                            </td>
                            <td>@(order.Total?.ToString("N0") ?? "-") VNĐ</td>
                            <td>
                                <a href="@Url.Action("Details", "Orders", new { id = order.IDOrder })" class="btn btn-sm btn-outline-success">
                                    Xem
                                </a>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }
    else
    {
        <p class="text-muted fst-italic">Bạn chưa có đơn hàng nào.</p>
    }
</div>
